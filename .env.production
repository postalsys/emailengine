# EmailEngine Production Environment Configuration
# Copy this file to .env and configure with your actual values

# ===========================================
# REQUIRED SECURITY SETTINGS
# ===========================================

# Encryption secret for EmailEngine (generate with: openssl rand -hex 32)
EENGINE_SECRET=CHANGE_ME_USE_STRONG_SECRET_HERE

# Redis password (generate with: openssl rand -base64 32)
REDIS_PASSWORD=CHANGE_ME_USE_STRONG_PASSWORD_HERE

# Redis connection with authentication
EENGINE_REDIS=redis://:${REDIS_PASSWORD}@redis:6379/2

# ===========================================
# EMAILENGINE CONFIGURATION
# ===========================================

# Log level (error, warn, info, debug)
EENGINE_LOG_LEVEL=info

# Number of worker processes (should match CPU cores, min 4, max 24)
EENGINE_WORKERS=8

# EmailEngine settings (configure SMTP password)
EENGINE_SETTINGS={"smtpServerEnabled": true, "smtpServerPort": 2525, "smtpServerHost": "0.0.0.0", "smtpServerAuthEnabled": true, "smtpServerPassword": "CHANGE_ME_SMTP_PASSWORD"}

# ===========================================
# SERVICE EXPOSURE (PRODUCTION)
# ===========================================

# Bind only to localhost for production (use reverse proxy for external access)
EMAILENGINE_API_BIND=127.0.0.1
EMAILENGINE_SMTP_BIND=127.0.0.1
EMAILENGINE_IMAP_BIND=127.0.0.1

# Port configuration (optional, defaults shown)
# EMAILENGINE_API_PORT=3000
# EMAILENGINE_SMTP_PORT=2525
# EMAILENGINE_IMAP_PORT=9993

# ===========================================
# REDIS CONFIGURATION
# ===========================================

# Redis is used as a database, not a cache
# No memory limit is set - Redis will use available system memory
# Monitor usage with: docker-compose exec redis redis-cli INFO memory
# Eviction policy is set to 'noeviction' to prevent data loss

# ===========================================
# LOGGING CONFIGURATION
# ===========================================

# Log levels
REDIS_LOG_LEVEL=notice

# Log rotation
LOG_MAX_SIZE=100m
LOG_MAX_FILE=10
LOG_COMPRESS=true

# ===========================================
# HEALTH CHECKS
# ===========================================

# Use strict health checks for production
REDIS_HEALTHCHECK=service_healthy

# Health check configuration
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=40s

# ===========================================
# OTHER SETTINGS
# ===========================================

# Restart policy
RESTART_POLICY=unless-stopped

# Docker image versions (optional, latest by default)
# EMAILENGINE_VERSION=latest
# REDIS_VERSION=7-alpine